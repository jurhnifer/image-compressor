<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Compressor</title>
    <meta
      name="description"
      content="Compress images in your browser. No uploads — all processing happens locally."
    />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <main class="container">
      <section class="card">
        <header class="header">
          <h1>Image Compressor</h1>
        </header>
        <div class="upload">
          <input id="fileInput" type="file" accept="image/*" />
          <label for="fileInput" id="dropZone" class="dropzone" tabindex="0" role="button">
            <div class="dropzone-title">Drop image</div>
          </label>

          <div class="filemeta" id="fileMeta" hidden>
            <div class="fileline">
              <span class="filelabel">File</span>
              <span class="filevalue" id="fileName">—</span>
            </div>
            <div class="fileline">
              <span class="filelabel">Size</span>
              <span class="filevalue" id="originalSize">—</span>
            </div>
          </div>
        </div>

        <div class="grid">
          <div class="panel">
            <h2>Settings</h2>

            <div class="row">
              <label for="quality" class="label">Quality</label>
              <div class="slider-row">
                <input id="quality" class="input range" type="range" min="0.1" max="1" step="0.1" value="0.8" />
                <span id="qualityValue" class="quality-value">80%</span>
              </div>
            </div>
            <div class="row">
              <label for="maxWidth" class="label">Max width (px)</label>
              <input id="maxWidth" class="input" type="number" min="100" max="5000" value="1920" step="100" />
            </div>
            <div class="row">
              <label for="maxHeight" class="label">Max height (px)</label>
              <input id="maxHeight" class="input" type="number" min="100" max="5000" value="1920" step="100" />
            </div>

            <div class="actions">
              <button id="compressBtn" class="btn primary" disabled>Compress image</button>
              <button id="resetBtn" class="btn" disabled>Reset</button>
            </div>
          </div>

          <div class="panel">
            <div class="status" aria-live="polite">
              <div class="status-line" id="statusLine">—</div>
              <div class="progress" id="progressWrap" hidden>
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
              </div>
            </div>

            <div class="preview-section" id="previewSection" hidden>
              <div class="preview-grid">
                <div class="preview-box">
                  <div class="preview-label">Original</div>
                  <img id="originalPreview" class="preview-img" alt="Original" />
                  <div class="file-info" id="originalSizePreview">—</div>
                </div>
                <div class="preview-box">
                  <div class="preview-label">Compressed</div>
                  <img id="compressedPreview" class="preview-img" alt="Compressed" />
                  <div class="file-info" id="compressedSizePreview">—</div>
                  <div class="file-info ok" id="compressionRatio">—</div>
                </div>
              </div>
              <div class="actions">
                <button id="downloadBtn" class="btn primary">Download compressed</button>
              </div>
            </div>

            <div class="loading" id="loading" hidden>
              <div class="spinner"></div>
              <p>Compressing…</p>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script type="module" src="/script.js"></script>
  </body>
</html>
